







## 재난 모니터링과 방범을 위한 능동형 드론 자동화 시스템 README.md

###### KW-방범대 (광운대학교 전자통신공학과 21년도 1학기 참빛설계학기 프로젝트)



---
## 개발 동기
> 산불, 해상 불법 조업, 야간 산행 등을 단속하기 위해 드론이 이미 이용되고 있다. 하지만 현재의 운용 방식은 사람이 직접 조종하면서 의심되는 정황을 육안으로 확인하는 방식으로, 효과적으로 이용되지 못하고 있다.
>
> 이런 이유로, 감시용 방범 드론 운용을 자동화하는 시스템을 개발하려고 한다.
>
> 정해진 구역을 순찰하기 위한 체크포인트가 입력되고, 비행 중에는 연직방향의 라이다를 통해 지면과의 상대고도를 유지하며, 카메라를 통해 목표한 객체가 인식되었을 떄 알림을 전송하여 원격제어가 가능토록 한다.
>
> 또한 획득하는 촬영 데이터를 기록하여, 객체 인식이 되었을 때 관리자에게 최근 사진을 파노라마로 후처리하여 전후 상황을 파악할 수 있도록 한다.
>
> 이와 같은 체크포인트 지정 비행 방식은 조종이 불가능한 거리(but, telemetry 수신 가능)에서도 자동화 시스템을 운용할 수 있다는 장점이 있다.
---


<br>


---
## 상세 기술

- 회전익 멀티콥터를 통해 GPS 기반의 체크포인트 순회 비행을 구현한다.
- 모든 형태의 촬영물 분석을 검증한다.
- 고정익 형태의 무인기를 통해 체공중 효율을 높이는 동시에 회전익 멀티콥터의 장점을 유지할 수 있도록 구현한다.

---

<br>

---
## 구성 요소

### 1. 무인기 통합 제어 시스템
>
> - *임무 수행 영역*과 *탐색 대상*에 관련한 정보를 송수신
>
> - 입력받은 정보를 바탕으로 구역을 모두 탐색할 수있는 비행 경로 자동 생성
>
> - GPS를 기반으로 해당 경로 자율 비행
>
> - 배터리 잔량 부족 시 이륙지점으로 자동 복귀


<br>


### 2. 2축 짐벌
>
> - 무인기의 자세와 무관하게 항상 카메라가 *연직 아래 방향* 을 바라볼 수 있도록 하는 장치
>
> - 아두이노와 자이로 센서, 서보모터를 활용

<br>


### 3. 라즈베리파이 운영 (실시간 영상분석, 촬영물 기록)
>
> ![shooter_rev0](https://user-images.githubusercontent.com/52745064/104879843-f16d2200-59a1-11eb-8994-50cbca7b4714.png)
>
>- 지나가는 경로에 관한 이미지를 1fps로 촬영.
>- 무인기의 2가지 수행 목표를 수행하기 위해 각각의 딥러닝 모델 활용
>>   - 산불, 쓰레기 불법 소각 감시
>>   - 해상 불법 조업 선박 감시
>>   - 실종자 수색
>
>- 촬영한 이미지는 실시간 분석과 동시에 외장메모리에 기록, 이후 정밀지도 생성에 활용
>- 위의 상황 발생 판단시, 가까운 지상국(이륙장소)으로 신호를 송신하면서 복귀.


<br>


### 4. 지상 데이터 후처리 (촬영물 파노라마 -> 2D 정밀지도)

> 실시간 영상을 분석하면서 기록된 항공 촬영 데이터를 2D 지상 정밀지도로 활용.
>
> OpenCV의 알고리즘을 활용해 초고해상도 파노라마 이미지 제작
>
> 알고리즘 확인용 시험 데이터는 Microsoft 지도에서 캡쳐
---


<br>


---
## 역할분담
| 이름 | 담당 | 주요업무 | 비고 |
| - | - | - | - |
| 김태윤 | 팀장 | 전체 시스템 설계, FC 아트웍 | |
| 김하은 | 팀원 | 촬영 데이터 후처리 (2D 파노라마) | |
| 신용준 | 팀원 | 2축 짐벌 개발 | |
| 이진헌 | 팀원 | 실시간 영상 분석, 송수신 | |
---


<br>


---
## 추진 일정
| 주차 | 일정 | 활동내용 | 비고 |
| - | - | - | -|
| 1 | 2021.03/02 | 전체 시스템 설계, 프로토콜 구성 |
| 2 | 2021.03/08 | 시험용 무인기 설계, 촬영물 분석 알고리즘 시험용 데이터셋 수집
| 3 | 2021.03/15 | 시험용 드론 제작, 비행 알고리즘 설계
| 4 | 2021.03/22 | 시험용 드론 제작, 비행 알고리즘 구현
| 5 | 2021.03/29 | 시험용 드론 비행 시험
| 6 | 2021.04/05 | 무인기 비행 최적화
| 7 | 2021.04/12 | 전원 전압 감지, 자동 복귀 구현
| 8 | 2021.04/19 | 중간보고서 작성 및 제출
| 9 | 2021.04/26 | 경로 생성 알고리즘 설계, 시험
| 10 | 2021.05/03 | 경로 생성 알고리즘 최적화
| 11 | 2021.05/10 | 단거리 비행 시험
| 12 | 2021.05/17 | 촬영물 분석 알고리즘 시험, 검증
| 13 | 2021.05/24 | 발생한 오류 수정, 총 알고리즘 최적화
| 14 | 2021.05/31 | 장거리 비행 시험, 최종 결과물 보고서 작성
| 15 | 2021.06/07 | 최종 결과보고서 및 성찰일기 제출
---


<br>


---
## 참고자료

#### 1. 무인기 제어시스템 개발
* 하버사인 GPS 기반 거리계산법(py): https://stricky.tistory.com/283
* nRF24L01+ 기본 문자열 통신: https://innoaus.com/posts/20190415/
* 라디안 <-> 오일러각: https://m.blog.naver.com/PostView.nhn?blogId=msyang59&logNo=220859527436&proxyReferer=https:%2F%2Fwww.google.com%2F
* Quaternion Mahony AHRS: https://m.blog.naver.com/PostView.nhn?blogId=ysahn2k&logNo=221410891895&proxyReferer=https:%2F%2Fwww.google.com%2F
* MPU 센서의 DMP 오류 : https://www.i2cdevlib.com/forums/topic/6-dmp-output-stopped-working/

#### 2. 짐벌 개발
* 아두이노 1축 짐벌 개발기: http://blog.naver.com/PostView.nhn?blogId=123gtf&logNo=221289162607

#### 3. 실시간 영상분석
* YOLO 활용, 화재/연기 분석: http://pkban.blogspot.com/2020/06/windows10-yolo-c-library-ai-cctv-3-fire.html
* 어떤 링크 : www.google.com

#### 4. 지상 촬영물 후처리
*  파이썬 파노라마: https://deep-learning-study.tistory.com/266
---


